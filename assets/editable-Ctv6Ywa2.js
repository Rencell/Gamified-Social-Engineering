import{d as j,a as A,c as Q,r as R,b as c,o as m,f as s,e as a,g as e,q as C,w as n,_ as w,h as q,i,k as z,L as H,m as $,z as N,F as I,s as L,t as O,T as P,O as J,p as f,P as E,Q as B,u as D,j as h,n as G,l as Y,R as F,v as T,x as K}from"./index-CRWd4KeT.js";const W={class:"gap-2 flex items-center justify-end text-sm"},X={class:"flex items-center gap-2"},Z=["onClick"],ee={class:"text-sidebar-foreground"},te={class:"flex flex-col gap-2 mt-4"},se={class:"w-full flex justify-end"},le=j({__name:"sidebarEdittable",props:{questions:{},currentIndex:{}},emits:["update:currentIndex"],setup(b,{emit:v}){const r=A(),l=b,g=v;function _(t){g("update:currentIndex",t)}const x=Q(()=>l.questions);function V(t){if(x.value.length<=1){alert("You must have at least one question.");return}l.currentIndex===t?g("update:currentIndex",Math.max(0,t-1)):l.currentIndex>t&&g("update:currentIndex",0),x.value.splice(t,1)}const S=()=>{x.value.push(B.Story),l.questions.length<=10&&(r.contentItems.quiz_limit=l.questions.length)},k=()=>{x.value.push(B.MCQ),l.questions.length<=10&&(r.contentItems.quiz_limit=l.questions.length)},o=R(!0),p=Q(()=>(r.contentItems.quiz_limit??0)>l.questions.length);return(t,u)=>(m(),c("div",null,[s(e(C),{class:"bg-background border-sidebar-border h-fit"},{default:n(()=>[s(e(w),null,{default:n(()=>[s(e(q),{class:"text-sidebar-foreground"},{default:n(()=>u[2]||(u[2]=[i("Question Status",-1)])),_:1,__:[2]})]),_:1}),s(e(z),{class:"space-y-4"},{default:n(()=>[a("div",W,[u[3]||(u[3]=i(" Edit Default ",-1)),s(e(H),{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=y=>o.value=y)},null,8,["modelValue"])]),a("div",X,[u[4]||(u[4]=a("p",{class:"text-xs w-25"},"Quiz Limit:",-1)),s(e($),{disabled:o.value,type:"number",modelValue:e(r).contentItems.quiz_limit,"onUpdate:modelValue":u[1]||(u[1]=y=>e(r).contentItems.quiz_limit=y),placeholder:"Enter quiz limit",class:N({"border-red-500 focus-visible:ring-red-500":p.value})},null,8,["disabled","modelValue","class"])]),(m(!0),c(I,null,L(t.questions,(y,d)=>(m(),c("div",{key:d,class:"space-y-2"},[a("div",{class:N(["flex justify-between text-sm hover:bg-ternary/10 rounded-lg cursor-pointer p-1",d===t.currentIndex?"bg-accent/50 font-medium p-2":""]),onClick:U=>_(d)},[a("span",ee,O(y.type)+" #"+O(d+1),1),s(e(P),{class:"h-4 w-4 text-destructive hover:text-destructive hover:opacity-100",onClick:J(U=>V(d),["stop"])},null,8,["onClick"])],10,Z)]))),128)),a("div",te,[s(e(f),{variant:"outline",size:"sm",onClick:S,class:"gap-2 bg-transparent"},{default:n(()=>[s(e(E),{class:"h-4 w-4"}),u[5]||(u[5]=i(" Add Story ",-1))]),_:1,__:[5]}),s(e(f),{variant:"outline",size:"sm",onClick:k,class:"gap-2 bg-transparent"},{default:n(()=>[s(e(E),{class:"h-4 w-4"}),u[6]||(u[6]=i(" Add Quiz ",-1))]),_:1,__:[6]})])]),_:1})]),_:1}),a("div",se,[s(e(f),{size:"sm",class:"mt-5",onClick:e(r).updateContentsQuiz},{default:n(()=>u[7]||(u[7]=[i(" Save Scenario",-1)])),_:1,__:[7]},8,["onClick"])])]))}}),ne={class:"lg:col-span-2 space-y-6"},ae={class:"flex gap-2"},oe={class:"mt-3 p-3 border rounded-lg bg-muted/50"},ie=["src"],ue={class:"flex justify-end mt-4"},de={class:"flex items-center justify-between"},re=j({__name:"story",props:{question:{},indexNumber:{}},setup(b){const v=A(),r=b,l=Q(()=>r.question||null),{previewUrl:g,changeUpdate:_,onFileChange:x,uploadImage:V}=D();async function S(){await V({item:{id:v.contentItems.id},image:l.value.image},k=>{l.value.image=k.image}),await v.updateContentsQuiz()}return(k,o)=>(m(),c("div",ne,[s(e(C),{class:"bg-background"},{default:n(()=>[s(e(w),null,{default:n(()=>[s(e(q),{class:"flex items-center gap-2"},{default:n(()=>[o[3]||(o[3]=i(" Step Content ",-1)),s(e(h),{variant:"secondary",class:"text-xs"},{default:n(()=>o[2]||(o[2]=[i(" Required ",-1)])),_:1,__:[2]})]),_:1,__:[3]})]),_:1}),s(e(z),{class:"space-y-4"},{default:n(()=>[a("div",null,[o[4]||(o[4]=a("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Title",-1)),s(e($),{placeholder:"Enter step title...",modelValue:l.value.title,"onUpdate:modelValue":o[0]||(o[0]=p=>l.value.title=p)},null,8,["modelValue"])]),a("div",null,[o[6]||(o[6]=a("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Step Image (Optional)",-1)),a("div",null,[a("div",ae,[s(e($),{type:"file",onChange:e(x)},null,8,["onChange"])]),a("div",oe,[a("img",{src:e(g)||e(G)(l.value.image)||"/placeholder.svg",alt:"Question preview",class:"max-w-full h-auto max-h-48 rounded mx-auto"},null,8,ie)]),a("div",ue,[s(e(f),{onClick:S,disabled:!e(_)},{default:n(()=>o[5]||(o[5]=[i("Save Image",-1)])),_:1,__:[5]},8,["disabled"])])])])]),_:1})]),_:1}),s(e(C),{class:"bg-background"},{default:n(()=>[s(e(w),null,{default:n(()=>[a("div",de,[s(e(q),{class:"flex items-center gap-2"},{default:n(()=>[o[8]||(o[8]=i(" Scenario Script ",-1)),s(e(h),{variant:"secondary",class:"text-xs"},{default:n(()=>o[7]||(o[7]=[i(" options ",-1)])),_:1,__:[7]})]),_:1,__:[8]}),s(e(f),{variant:"outline",size:"sm",onClick:o[1]||(o[1]=p=>l.value.description.push("Text")),class:"gap-2 bg-transparent"},{default:n(()=>[s(e(E),{class:"h-4 w-4"}),o[9]||(o[9]=i(" Add Story ",-1))]),_:1,__:[9]})]),(m(!0),c(I,null,L(l.value.description,(p,t)=>(m(),c("div",{key:t},[o[10]||(o[10]=a("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Story",-1)),s(e(Y),{placeholder:"Enter step description...",class:"min-h-[100px] resize-none",modelValue:l.value.description[t],"onUpdate:modelValue":u=>l.value.description[t]=u},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),_:1})]),_:1})]))}}),me={class:"lg:col-span-2 space-y-6"},pe={class:"flex gap-2"},ce={class:"mt-3 p-3 border rounded-lg bg-muted/50"},fe=["src"],ve={class:"grid grid-cols-2 gap-2 mt-2"},ge={class:"flex justify-end mt-4"},xe={class:"flex items-center justify-between"},_e={class:"flex items-center gap-2"},be={class:"text-sm font-medium text-muted-foreground min-w-[20px]"},ye={class:"flex items-center justify-between"},ke=j({__name:"mcq",props:{question:{}},setup(b){const v=A(),r=b,l=Q(()=>r.question||null),{previewUrl:g,changeUpdate:_,onFileChange:x,uploadImage:V}=D();async function S(){await V({item:{id:v.contentItems.id},image:l.value.image},p=>{l.value.image=p.image}),await v.updateContentsQuiz()}function k(){if(l.value.options.length>=4)return;const p=String.fromCharCode(97+l.value.options.length);l.value.options.push({id:p,text:""})}function o(p){l.value.options.length>2&&(l.value.options=l.value.options.filter(t=>t.id!==p))}return(p,t)=>{const u=F("GripVertical"),y=F("Check");return m(),c("div",me,[s(e(C),{class:"bg-background"},{default:n(()=>[s(e(w),null,{default:n(()=>[s(e(q),{class:"flex items-center gap-2"},{default:n(()=>[t[5]||(t[5]=i(" Step Content ",-1)),s(e(h),{variant:"secondary",class:"text-xs"},{default:n(()=>t[4]||(t[4]=[i(" Required ",-1)])),_:1,__:[4]})]),_:1,__:[5]})]),_:1}),s(e(z),{class:"space-y-4"},{default:n(()=>[a("div",null,[t[6]||(t[6]=a("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Question",-1)),s(e($),{placeholder:"Enter step title...",modelValue:l.value.question,"onUpdate:modelValue":t[0]||(t[0]=d=>l.value.question=d)},null,8,["modelValue"])]),a("div",null,[t[11]||(t[11]=a("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Image (Optional)",-1)),a("div",null,[a("div",pe,[s(e($),{type:"file",onChange:e(x)},null,8,["onChange"])]),a("div",ce,[a("img",{src:e(g)||e(G)(l.value.image)||"/placeholder.svg",alt:"Question preview",class:"max-w-full h-auto max-h-48 rounded mx-auto"},null,8,fe)]),t[10]||(t[10]=a("label",{class:"text-sm font-medium text-foreground my-2 block"},"Set image position (default: left)",-1)),a("div",ve,[s(e(f),{onClick:t[1]||(t[1]=d=>l.value.position="left"),variant:l.value.position==="left"?"default":"outline",size:"sm"},{default:n(()=>t[7]||(t[7]=[i(" Left ",-1)])),_:1,__:[7]},8,["variant"]),s(e(f),{onClick:t[2]||(t[2]=d=>l.value.position="right"),variant:l.value.position==="right"?"default":"outline",size:"sm"},{default:n(()=>t[8]||(t[8]=[i(" Right ",-1)])),_:1,__:[8]},8,["variant"])]),a("div",ge,[s(e(f),{onClick:S,disabled:!e(_)},{default:n(()=>t[9]||(t[9]=[i("Save Image",-1)])),_:1,__:[9]},8,["disabled"])])])])]),_:1})]),_:1}),s(e(C),{class:"bg-background"},{default:n(()=>[s(e(w),null,{default:n(()=>[a("div",xe,[s(e(q),{class:"flex items-center gap-2"},{default:n(()=>[t[13]||(t[13]=i(" Scenario Script ",-1)),s(e(h),{variant:"secondary",class:"text-xs"},{default:n(()=>t[12]||(t[12]=[i(" options ",-1)])),_:1,__:[12]})]),_:1,__:[13]}),s(e(f),{disabled:l.value.options.length>=4,variant:"outline",size:"sm",onClick:k,class:"gap-2 bg-transparent"},{default:n(()=>[s(e(E),{class:"h-4 w-4"}),t[14]||(t[14]=i(" Add Option ",-1))]),_:1,__:[14]},8,["disabled"])])]),_:1}),s(e(z),{class:"space-y-3"},{default:n(()=>[(m(!0),c(I,null,L(l.value.options,(d,U)=>(m(),c("div",{key:d.id,class:"flex items-center gap-3 p-3 border rounded-lg bg-card"},[a("div",_e,[s(u,{class:"h-4 w-4 text-muted-foreground cursor-move"}),a("span",be,O(String.fromCharCode(65+U)),1)]),s(e($),{placeholder:`Option ${String.fromCharCode(65+U)}`,modelValue:d.text,"onUpdate:modelValue":M=>d.text=M,class:"flex-1"},null,8,["placeholder","modelValue","onUpdate:modelValue"]),s(e(f),{onClick:M=>l.value.answer=d.id,variant:l.value.answer===d.id?"default":"outline",size:"sm",class:"gap-1 min-w-[80px]"},{default:n(()=>[l.value.answer===d.id?(m(),c(I,{key:0},[s(y,{class:"h-3 w-3"}),t[15]||(t[15]=i(" Correct ",-1))],64)):(m(),c(I,{key:1},[i(" Mark ")],64))]),_:2},1032,["onClick","variant"]),l.value.options.length>2?(m(),T(e(f),{key:0,onClick:M=>o(d.id),variant:"outline",size:"sm",class:"text-destructive hover:text-destructive"},{default:n(()=>[s(e(P),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):K("",!0)]))),128)),t[16]||(t[16]=a("p",{class:"text-xs text-muted-foreground mt-2"}," Max: 4 options. Minimum: 2 options. ",-1))]),_:1,__:[16]})]),_:1}),s(e(C),{class:"bg-background"},{default:n(()=>[s(e(w),null,{default:n(()=>[a("div",ye,[s(e(q),{class:"flex items-center gap-2"},{default:n(()=>[t[18]||(t[18]=i(" Explanation ",-1)),s(e(h),{variant:"secondary",class:"text-xs"},{default:n(()=>t[17]||(t[17]=[i(" options ",-1)])),_:1,__:[17]})]),_:1,__:[18]})])]),_:1}),s(e(z),null,{default:n(()=>[a("div",null,[t[19]||(t[19]=a("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Answer Explanation",-1)),s(e(Y),{placeholder:"Explain why this is the correct answer...",modelValue:l.value.explanation,"onUpdate:modelValue":t[3]||(t[3]=d=>l.value.explanation=d),class:"min-h-[120px] resize-none"},null,8,["modelValue"]),t[20]||(t[20]=a("p",{class:"text-xs text-muted-foreground mt-2"}," This explanation will be shown to students after they answer the question. ",-1))])]),_:1})]),_:1})])}}}),Ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},qe=j({__name:"editable",props:{questions:{}},setup(b){const v=b,r=R(0),l=Q(()=>v.questions[r.value]||null),g=_=>{r.value=_};return(_,x)=>(m(),c("div",Ce,[l.value.type==="story"?(m(),T(re,{key:0,question:l.value,"index-number":r.value},null,8,["question","index-number"])):(m(),T(ke,{key:1,question:l.value},null,8,["question"])),s(le,{questions:v.questions,"current-index":r.value,"onUpdate:currentIndex":g},null,8,["questions","current-index"])]))}});export{qe as default};
