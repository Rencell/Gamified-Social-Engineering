import{d as S,u as T,a as B,r as N,c as j,b as d,o as r,e as l,f as s,w as n,g as t,_ as f,h as g,i,j as h,k as x,l as k,m as y,n as D,p as m,q as v,t as V,P as F,F as _,s as P,v as G,x as L,G as R,C as H,T as J,y as K}from"./index-CRWd4KeT.js";import{_ as W}from"./SidebarEdittable.vue_vue_type_script_setup_true_lang-Cb6CyAtL.js";const X={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Y={class:"lg:col-span-2 space-y-6"},Z={class:"flex gap-2"},ee={class:"mt-3 p-3 border rounded-lg bg-muted/50"},te=["src"],se={class:"flex justify-end mt-4"},ae={class:"flex items-center justify-between"},ne={class:"flex items-center gap-2"},le={class:"text-sm font-medium text-muted-foreground min-w-[20px]"},ue=S({__name:"Editable",props:{questions:{}},emits:["toggleOnCreateQuestion","toggleOnDeleteQuestion"],setup(q){const b=q,{previewUrl:$,changeUpdate:I,onFileChange:U,uploadImage:z}=T(),C=B(),p=N(0),a=j(()=>b.questions[p.value]||null);function O(){if(a.value.options.length>=4)return;const u=String.fromCharCode(97+a.value.options.length);a.value.options.push({id:u,text:""})}function Q(u){a.value.options.length>2&&(a.value.options=a.value.options.filter(e=>e.id!==u))}function A(u){a.value.correctAnswer=u}function E(){a.value.image=""}async function M(){await z({item:{id:C.contentItems.id},image:a.value.image},u=>{a.value.image=u.image}),C.updateContentsQuiz()}return(u,e)=>(r(),d("div",X,[l("div",Y,[s(t(v),{class:"bg-background"},{default:n(()=>[s(t(f),null,{default:n(()=>[s(t(g),{class:"flex items-center gap-2"},{default:n(()=>[e[4]||(e[4]=i(" Question Content ",-1)),s(t(h),{variant:"secondary",class:"text-xs"},{default:n(()=>e[3]||(e[3]=[i(" Required ",-1)])),_:1,__:[3]})]),_:1,__:[4]})]),_:1}),s(t(x),{class:"space-y-4"},{default:n(()=>[l("div",null,[e[5]||(e[5]=l("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Question Text",-1)),s(t(k),{placeholder:"Enter your question here...",modelValue:a.value.question,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.question=o),class:"min-h-[100px] resize-none"},null,8,["modelValue"])]),l("div",null,[e[7]||(e[7]=l("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Question Image (Optional)",-1)),l("div",Z,[s(t(y),{type:"file",onChange:t(U)},null,8,["onChange"])]),l("div",ee,[l("img",{src:t($)||t(D)(a.value.image)||"/placeholder.svg",alt:"Question preview",class:"max-w-full h-auto max-h-48 rounded mx-auto",onError:E},null,40,te)]),l("div",se,[s(t(m),{onClick:M,disabled:!t(I)},{default:n(()=>e[6]||(e[6]=[i("Save Image",-1)])),_:1,__:[6]},8,["disabled"])])])]),_:1})]),_:1}),s(t(v),{class:"bg-background"},{default:n(()=>[s(t(f),null,{default:n(()=>[l("div",ae,[s(t(g),{class:"flex items-center gap-2"},{default:n(()=>[e[8]||(e[8]=i(" Answer Options ",-1)),s(t(h),{variant:"secondary",class:"text-xs"},{default:n(()=>[i(V(a.value.options.length)+" options ",1)]),_:1})]),_:1,__:[8]}),s(t(m),{disabled:a.value.options.length===4,variant:"outline",size:"sm",onClick:O,class:"gap-2 bg-transparent"},{default:n(()=>[s(t(F),{class:"h-4 w-4"}),e[9]||(e[9]=i(" Add Option ",-1))]),_:1,__:[9]},8,["disabled"])])]),_:1}),s(t(x),{class:"space-y-3"},{default:n(()=>[(r(!0),d(_,null,P(a.value.options,(o,w)=>(r(),d("div",{key:o.id,class:"flex items-center gap-3 p-3 border rounded-lg bg-card"},[l("div",ne,[s(t(R),{class:"h-4 w-4 text-muted-foreground cursor-move"}),l("span",le,V(String.fromCharCode(65+w)),1)]),s(t(y),{placeholder:`Option ${String.fromCharCode(65+w)}`,modelValue:o.text,"onUpdate:modelValue":c=>o.text=c,class:"flex-1"},null,8,["placeholder","modelValue","onUpdate:modelValue"]),s(t(m),{variant:a.value.correctAnswer===o.id?"default":"outline",size:"sm",onClick:c=>A(o.id),class:"gap-1 min-w-[80px]"},{default:n(()=>[a.value.correctAnswer===o.id?(r(),d(_,{key:0},[s(t(H),{class:"h-3 w-3"}),e[10]||(e[10]=i(" Correct ",-1))],64)):(r(),d(_,{key:1},[i(" Mark ")],64))]),_:2},1032,["variant","onClick"]),a.value.options.length>2?(r(),G(t(m),{key:0,variant:"outline",size:"sm",onClick:c=>Q(o.id),class:"text-destructive hover:text-destructive"},{default:n(()=>[s(t(J),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):L("",!0)]))),128)),e[11]||(e[11]=l("p",{class:"text-xs text-muted-foreground mt-2"}," Max: 4 options. Minimum: 2 options. ",-1))]),_:1,__:[11]})]),_:1}),s(t(v),{class:"bg-background"},{default:n(()=>[s(t(f),null,{default:n(()=>[s(t(g),null,{default:n(()=>e[12]||(e[12]=[i("Explanation",-1)])),_:1,__:[12]})]),_:1}),s(t(x),null,{default:n(()=>[l("div",null,[e[13]||(e[13]=l("label",{class:"text-sm font-medium text-foreground mb-2 block"},"Answer Explanation",-1)),s(t(k),{placeholder:"Explain why this is the correct answer...",modelValue:a.value.explanation,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.explanation=o),class:"min-h-[120px] resize-none"},null,8,["modelValue"]),e[14]||(e[14]=l("p",{class:"text-xs text-muted-foreground mt-2"}," This explanation will be shown to students after they answer the question. ",-1))])]),_:1})]),_:1})]),s(W,{questions:b.questions,currentIndex:p.value,"onUpdate:currentIndex":e[2]||(e[2]=o=>p.value=o),propsMap:t(K).MultipleChoice},null,8,["questions","currentIndex","propsMap"])]))}});export{ue as default};
